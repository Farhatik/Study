import prettytable as pt
import telebot
import config
from telebot import types
import numpy as np
import pandas as pd
from tabulate import tabulate

list_topics = '1. –ü—Ä–µ–¥–µ–ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏\n'\
        '2. –ü—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏\n'\
        '3. –ü—Ä–æ–∑–≤–æ–¥–Ω–∞—è\n'\
        '4. –ü—Ä–∞–≤–∏–ª–æ –õ–æ–ø–∏—Ç–∞–ª—è\n'\
        '5. –§–æ—Ä–º—É–ª–∞ –¢–µ–π–ª–æ—Ä–∞\n'\
        '6. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–µ–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é —Ñ–æ—Ä–º—É–ª—ã –¢–µ–π–ª–æ—Ä–∞\n'\
        '7. –û–±—â–∏–µ –ø—Ä–∏–µ–º—ã –∏ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è\n'\
        '8. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π\n'\
        '9. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π\n'\
        '10. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–≥—Ä–∞–ª\n'\
        '11. –ù–µ—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª—ã –æ—Ç –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π\n'\
        '12. –†—è–¥—ã —Å –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏ —á–ª–µ–Ω–∞–º–∏\n'\
        '13. –ê–±—Å–æ–ª—é—Ç–Ω–æ –∏ –Ω–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ —Å—Ö–æ–¥—è—â–∏–µ—Å—è —Ä—è–¥—ã\n'\
        '14. –°—Ç–µ–ø–µ–Ω–Ω—ã–µ —Ä—è–¥—ã\n'\
        '15. –¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ä—è–¥—ã –§—É—Ä—å–µ\n'\
        '\n'\
        '<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–º—ã:</b>'

NUM_TOPICS = 15
NUM_tasks = [9, 5, 8, 7, 7,
             9, 9, 7, 7, 10,
             10, 9, 5, 5, 6]

bot = telebot.TeleBot(config.TOKEN)

base_markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
base_item1 = types.KeyboardButton('/topics')
base_item2 = types.KeyboardButton('/stat')
base_item3 = types.KeyboardButton('/help')
base_markup.add(base_item1, base_item2, base_item3)


@bot.message_handler(commands=['start'])
def welcome(message):
    markup = types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
    item1 = types.KeyboardButton('–°–ø–∏—Å–æ–∫ —Ç–µ–º')
    markup.add(item1)
    bot.send_message(message.chat.id,
                     "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {0.first_name}!"
                     "\n–Ø - <b>{1.first_name}</b>, " 
                     "—Å–æ–∑–¥–∞–Ω–Ω—ã–π —á—Ç–æ–±—ã –ø–æ–º–æ–≥–∞—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞–º –≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –∞–Ω–∞–ª–∏–∑—É.\n"
                     "–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É, –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–µ–º—É –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞".format(
                         message.from_user, bot.get_me()), parse_mode='html', reply_markup=markup)


@bot.message_handler(commands=['help'])
def help(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
    item1 = types.KeyboardButton('/topics')
    item2 = types.KeyboardButton('/stat')
    markup.add(item1, item2)
    bot.send_message(message.chat.id, '–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —á–∞—Ç-–±–æ—Ç–æ–º?\n\n'
                                      '1) –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ–º –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã /topics –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞, –ª–∏–±–æ –Ω–∞–ø–∏—Å–∞–≤ —Å–æ–æ–±—â–µ–Ω–∏–µ "–°–ø–∏—Å–æ–∫ —Ç–µ–º". –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑—É—á–∏—Ç—å;\n\n'
                                      '2) –í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ä–µ—à–∏—Ç—å;\n\n'
                                      '3) –ü–æ—Å–ª–µ –ø—Ä–æ—Ä–µ—à–∏–≤–∞–Ω–∏—è –∑–∞–¥–∞—á–∏, —Å—Ä–∞–≤–Ω–∏—Ç–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º –æ—Ç–≤–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–∞–º –ø—Ä–∏—à–ª–µ—Ç –±–æ—Ç;\n\n'
                                      '4) –ë–æ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–µ—Ç –≤–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å, —á—Ç–æ–±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ—à–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á, –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–æ–º–∞–Ω–¥–æ–π /stat;\n\n'
                                      '5) –ë–æ–Ω—É—Å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è ‚Äì "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ —Ç–µ–º–µ". –í–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –¥–∞–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑—É—á–∏—Ç—å —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–µ–º–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ.\n\n'
                                      '–ñ–µ–ª–∞–µ–º —É—Å–ø–µ—Ö–æ–≤ –≤ –∏–∑—É—á–µ–Ω–∏–∏ –≤—ã—Å—à–µ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏!'
                     , reply_markup=markup)


@bot.message_handler(commands=['topics'])
def topics(message):
    msg = bot.send_message(message.chat.id, list_topics, parse_mode='html', reply_markup=base_markup)
    bot.register_next_step_handler(msg, choose_topic)


@bot.message_handler(commands=['stat'])
def stat(message):
    #  'user', 'task_topic', 'task_num', 'is_right'
    table = pd.read_csv('stat.csv')
    table = table[table.user == message.from_user.id]
    t = table[['task_topic', 'task_num', 'is_right']].to_markdown(tablefmt='simple',
                                                                  index=False,
                                                                  headers=['–¢–µ–º–∞', '–ó–∞–¥–∞–Ω–∏–µ', '–í–µ—Ä–Ω–æ?'])
    bot.send_message(message.chat.id, f'<pre>{t}</pre>', parse_mode='html', reply_markup=base_markup)


@bot.message_handler(content_types=['text'])
def show_list_topics(message):
    if message.text.lower() == '—Å–ø–∏—Å–æ–∫ —Ç–µ–º' or message.text.lower() == '/topics':
        msg = bot.send_message(message.chat.id, list_topics, parse_mode='html', reply_markup=base_markup)
        bot.register_next_step_handler(msg, choose_topic)


@bot.message_handler(content_types=['text'])
def choose_topic(message):
    topics_ar = (np.arange(NUM_TOPICS) + 1).astype('str')
    msg = None
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
    item1 = types.KeyboardButton('–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ –¥–∞–Ω–Ω–æ–π —Ç–µ–º–µ')
    item2 = types.KeyboardButton('/topics')
    item3 = types.KeyboardButton('/stat')
    item4 = types.KeyboardButton('/help')
    markup.add(item4, item2, item3, item1)
    if message.text == 'help' or message.text == '/help':
        help(message)
    elif message.text == 'topics' or message.text == '/topics':
        topics(message)
    elif message.text == 'stat' or message.text == '/stat':
        stat(message)
    elif message.text not in topics_ar:
        msg = bot.send_message(message.chat.id, '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–≤–µ–¥–µ–Ω –Ω–æ–º–µ—Ä —Ç–µ–º—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.')
        bot.register_next_step_handler(message, choose_topic)
    elif message.text.lower() == '1' or message.text.lower() == '–ø—Ä–µ–¥–µ–ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏':
        msg = bot.send_message(message.chat.id, '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–ü—Ä–µ–¥–µ–ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏":\n'
                                                "1. –î–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ö–æ–¥—è –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥–µ–ª–æ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–ª–µ–≥–∫–∞—è –≤–µ—Ä—Å–∏—è)\n"
                                                "2. –î–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ö–æ–¥—è –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥–µ–ª–æ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (—á—É—Ç—å —Å–ª–æ–∂–Ω–µ–µ)\n"
                                                "3. –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å—Ö–æ–¥–∏—Ç—Å—è (–ª–µ–≥–∫–∞—è –≤–µ—Ä—Å–∏—è)\n"
                                                "4. –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å—Ö–æ–¥–∏—Ç—Å—è (—á—É—Ç—å —Å–ª–æ–∂–Ω–µ–µ)\n"
                                                "4. –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞\n"
                                                "5. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–ª–µ–≥–∫–∞—è –≤–µ—Ä—Å–∏—è)\n"
                                                "6. –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø—Ä–µ–¥–µ–ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–≤–µ–Ω —á–∏—Å–ª—É\n"
                                                "7. –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø—Ä–µ–¥–µ–ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–≤–µ–Ω –Ω—É–ª—é —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º\n"
                                                "8. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n"
                                                "9. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n"
                                                "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '2' or message.text.lower() == '–ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏\n':
        msg = bot.send_message(message.chat.id, '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–ü—Ä–µ–¥–µ–ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏":\n'
                                          '1. –î–æ–∫–∞–∑–∞—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ö–æ—à–∏ –ø—Ä–µ–¥–µ–ª–∞ —Ñ—É–Ω–∫—Ü–∏–∏\n'
                                          '2. –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–µ–¥–µ–ª–∞ –≤ —Ç–æ—á–∫–µ\n'
                                          '3. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª—ã —á–µ—Ç—ã—Ä–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                          '4. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª—ã —á–µ—Ç—ã—Ä–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                          '5. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª—ã —á–µ—Ç—ã—Ä–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                          "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '3' or message.text.lower() == '–ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è':
        msg = bot.send_message(message.chat.id, '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–ü—Ä–æ–∑–≤–æ–¥–Ω–∞—è":\n'
                                          '1. –ù–∞–π—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–∏ (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                          '2. –í—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Ç–æ—á–∫–µ\n'
                                          '3. –í—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–∏ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                          '4. –ù–∞–π—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –¥–≤—É—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å –ø–æ–º–æ—â—å—é –ø—Ä–∞–≤–∏–ª–æ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–æ–∂–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏\n'
                                          '5.  –í—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–∏ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                          '6.  –í—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–∏ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å++)\n'
                                          '7.  –î–æ–∫–∞–∑–∞—Ç—å —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ\n'
                                          '8.  –í—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–∏ (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                          "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '4' or message.text.lower() == '–ø—Ä–∞–≤–∏–ª–æ –ª–æ–ø–∏—Ç–∞–ª—è':
        msg = bot.send_message(message.chat.id, '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–ü—Ä–∞–≤–∏–ª–æ –õ–æ–ø–∏—Ç–∞–ª—è":\n'
                                          '1. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                          '2. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                          '3. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                          '4. –ù–∞–π—Ç–∏ –ø—Ä–∏–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                          '5. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å++)\n'
                                          '6. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                          '7. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª (—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏)\n'
                                          "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '5' or message.text.lower() == '—Ñ–æ—Ä–º—É–ª–∞ —Ç–µ–π–ª–æ—Ä–∞':
        msg = bot.send_message(message.chat.id, '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "—Ñ–æ—Ä–º—É–ª–∞ –¢–µ–π–ª–æ—Ä–∞":\n'
                                                '1. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É–ª–æ–π –ú–∞–∫–ª–æ—Ä–µ–Ω–∞\n'
                                                '2. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É–ª–æ–π –ú–∞–∫–ª–æ—Ä–µ–Ω–∞ (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '3. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É–ª–æ–π –ú–∞–∫–ª–æ—Ä–µ–Ω–∞ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '4. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É–ª–æ–π –ú–∞–∫–ª–æ—Ä–µ–Ω–∞ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '5. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É–ª–æ–π –ú–∞–∫–ª–æ—Ä–µ–Ω–∞ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å++)\n'
                                                '6. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É–ª–æ–π –ú–∞–∫–ª–æ—Ä–µ–Ω–∞ (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '7. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É–ª–æ–π –ú–∞–∫–ª–æ—Ä–µ–Ω–∞ (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '6':
        msg = bot.send_message(message.chat.id, '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–µ–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é —Ñ–æ—Ä–º—É–ª—ã –¢–µ–π–ª–æ—Ä–∞":\n'
                                                '1. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '2. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '3. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å++)\n'
                                                '4. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '5. –ù–∞–π—Ç–∏ –ø—Ä–∏–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '6. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å++)\n'
                                                '7. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '8. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '9. –ù–∞–π—Ç–∏ –ø—Ä–µ–¥–µ–ª —Ñ—É–Ω–∫—Ü–∏–∏ (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å++)\n'
                                                "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '7' or message.text.lower() == '–æ–±—â–∏–µ –ø—Ä–∏–µ–º—ã –∏ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è':
        msg = bot.send_message(message.chat.id, '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–µ–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é —Ñ–æ—Ä–º—É–ª—ã –¢–µ–π–ª–æ—Ä–∞":\n'
                                                '1. –ù–∞–π—Ç–∏ –ø–µ—Ä–≤–æ–æ–±—Ä–∞–∑–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–∏ (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '2. –ù–∞–π—Ç–∏ –ø–µ—Ä–≤–æ–æ–±—Ä–∞–∑–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–∏ (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '3. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å++)\n'
                                                '4. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '5. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '6. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å++)\n'
                                                '7. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '8. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '9. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å++)\n'
                                                "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '8' or message.text.lower() == '–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π':
        msg = bot.send_message(message.chat.id, '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π":\n'
                                                '1. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '2. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '3. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '4. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '5. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '6. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '7. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å++)\n'
                                                "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '9' or message.text.lower() == '–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π':
        msg = bot.send_message(message.chat.id, '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π":\n'
                                                '1. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '2. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '3. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '4. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '5. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '6. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '7. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å++)\n'
                                                "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '10' or message.text.lower():
        msg = bot.send_message(message.chat.id, '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π":\n'
                                                '1. –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –≤—Å—è–∫–∞—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º–∞ –Ω–∞ –Ω–µ–º.\n'
                                                '2. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª —Å –ø–æ–º–æ—â—å—é –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã—Ö —Å—É–º–º\n'
                                                '3. –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ñ—Ü–Ω–∫—Ü–∏—è –±—ã–ª–∞ –∏–Ω—Ç–≥—Ä–∏—Ä—É–µ–º–∞ –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è–ª–æ—Å—å –Ω–µ–∫–æ–µ —É—Å–ª–æ–≤–∏–µ\n'
                                                '4. –î–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ\n'
                                                '5. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª —Å –ø–æ–º–æ—â—å—é —Ñ–æ—Ä–º—É–ª—ã –ù—å—é—Ç–æ–Ω–∞-–õ–µ–π–±–Ω–∏—Ü–∞\n'
                                                '6. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '7. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '8. –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '9. –î–æ–∫–∞–∑–∞—Ç—å —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ\n'
                                                '10. –î–æ–∫–∞–∑–∞—Ç—å –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–∞\n'
                                                "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '11' or message.text.lower():
        msg = bot.send_message(message.chat.id, '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–ù–µ—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª—ã –æ—Ç –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π":\n'
                                                '1. –í—ã—á–∏—Å–ª–∏—Ç—å —á–µ—Ç—ã—Ä–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞ (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '2. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '3. –í—ã—á–∏—Å–ª–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '4. –í—ã—á–∏—Å–ª–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '5. –í—ã—á–∏—Å–ª–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '6. –ù–∞–π—Ç–∏ –ø–ª–æ—â–∞–¥—å —Ñ–∏–≥—É—Ä—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –æ—Ç—Ä–µ–∑–∫–æ–º (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                                                '7. –í—ã—á–∏—Å–ª–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å++)\n'
                                                '8. –í—ã—á–∏—Å–ª–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞–ª (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å+++)\n'
                                                '9. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                '10. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                                                
                                                "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '12' or message.text.lower(): #–†—è–¥—ã —Å –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏ —á–ª–µ–Ω–∞–º–∏
        msg = bot.send_message(message.chat.id,
                               '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–†—è–¥—ã —Å –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏ —á–ª–µ–Ω–∞–º–∏":\n'
                               '1. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                               '2. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                               '3. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                               '4. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å+)\n'
                               '5. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                               '6. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–∑–Ω–∞–∫–∞ –î–∞–ª–∞–º–±–µ—Ä–∞\n'
                               '7. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–∑–Ω–∞–∫–∞ –ö–æ—à–∏\n'
                               '8. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–∑–Ω–∞–∫–∞ –†–∞–∞–±–µ\n'
                               '9. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–∑–Ω–∞–∫–∞ –ì–∞—É—Å—Å–∞\n'

                               "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '13' or message.text.lower():
        msg = bot.send_message(message.chat.id,
                               '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–ê–±—Å–æ–ª—é—Ç–Ω–æ –∏ –Ω–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ —Å—Ö–æ–¥—è—â–∏–µ—Å—è —Ä—è–¥—ã":\n'
                               '1. –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ä—è–¥ –∞–±—Å–æ–ª—é—Ç–Ω–æ —Å—Ö–æ–¥–∏—Ç—Å—è \n'
                               '2. –î–æ–∫–∞–∑–∞—Ç—å —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å –∑–Ω–∞–∫–æ—á–µ—Ä–µ–¥—É—é—â–µ–≥–æ—Å—è —Ä—è–¥–∞\n'
                               '3. –î–æ–∫–∞–∑–∞—Ç—å —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ä—è–¥–∞ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ \n'
                               '4. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                               '5. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏ –∞–±—Å–æ–ª—é—Ç–Ω—É—é —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'

                               "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '14' or message.text.lower():
        msg = bot.send_message(message.chat.id,
                               '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–°—Ç–µ–ø–µ–Ω–Ω—ã–µ —Ä—è–¥—ã":\n'
                               '1. –ù–∞–π—Ç–∏ —Ä–∞–¥–∏—É—Å —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                               '2. –ù–∞–π—Ç–∏ —Ä–∞–¥–∏—É—Å —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                               '3. –ù–∞–π—Ç–∏ —Ä–∞–¥–∏—É—Å —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (—Ç—è–∂–µ–ª—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                               '4. –ù–∞–π—Ç–∏ —Å—É–º–º–∞ —Ä—è–¥–∞\n'
                               '5. –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ä—è–¥ —Ä–∞–≤–µ–Ω —á–∏—Å–ª—É \n'

                               "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)
    elif message.text.lower() == '15' or message.text.lower():
        msg = bot.send_message(message.chat.id,
                               '–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–µ "–¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ä—è–¥—ã –§—É—Ä—å–µ":\n'
                               '1. –ù–∞–π—Ç–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Ñ–æ—Ä–º—É —Ä—è–¥–∞ –§—É—Ä—å–µ \n'
                               '2. –î–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –∫—É—Å–æ—á–Ω–æ –≥–ª–∞–¥–∫–∞—è –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–ª–æ–∂–µ–Ω–∞ –≤ –¥–∞–Ω–Ω–æ–º –≤–∏–¥–µ\n'
                               '3. –†–∞–∑–ª–æ–∂–∏—Ç—å –≤ —Ä—è–¥ –§—É—Ä—å–µ (–ª–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                               '4. –†–∞–∑–ª–æ–∂–∏—Ç—å –≤ —Ä—è–¥ –§—É—Ä—å–µ (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)\n'
                               '5. –†–∞–∑–ª–æ–∂–∏—Ç—å –≤ —Ä—è–¥ –§—É—Ä—å–µ (—Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)\n'
                               '6. –î–æ–∫–∞–∑–∞—Ç—å —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ \n'

                               "\n<b>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</b>",
                               parse_mode='html', reply_markup=markup
                               )
        bot.register_next_step_handler(msg, show_tasks_topic, message.text)

@bot.message_handler(content_types=['text'])
def show_tasks_topic(message, topic):
    tasks_arr = (np.arange(NUM_tasks[int(topic) - 1]) + 1).astype('str')
    if message.text == '–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ –¥–∞–Ω–Ω–æ–π —Ç–µ–º–µ':
        bot.send_message(message.chat.id, '–°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã')
        # sendDocument
        doc = open('topics/' + topic + '/' + topic + '.pdf', 'rb')
        bot.send_document(message.chat.id, doc, reply_markup=base_markup)
        # bot.send_document(message.chat.id, "FILEID")

    elif message.text == '/help':
        help(message)
    elif message.text == '/stat':
        stat(message)
    elif message.text == '/topics':
        topics(message)
    elif message.text not in tasks_arr:
        msg = bot.send_message(message.chat.id, '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–≤–µ–¥–µ–Ω –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.')
        bot.register_next_step_handler(message, show_tasks_topic, topic)
    else:
        bot.send_message(message.chat.id, '–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏:')
        photo = open('topics/' + topic + '/task/' + message.text + '.png', 'rb')
        bot.send_photo(message.chat.id, photo)
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
        item = types.KeyboardButton('–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ ‚Ññ' + message.text)
        markup.add(item)
        msg = bot.send_message(message.chat.id, '–ö–æ–≥–¥–∞ —Ä–µ—à–∏—Ç–µ –¥–∞–Ω–Ω—É—é –∑–∞–¥–∞—á—É, –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–Ω–æ–ø–∫–æ–π —Å–Ω–∏–∑—É', reply_markup=markup)
        msg.text += message.text
        bot.register_next_step_handler(msg, show_solve_topic, topic, message.text)


@bot.message_handler(content_types=['text'])
def show_solve_topic(message, topic, task):
    bot.send_message(message.chat.id, '–†–µ—à–µ–Ω–∏–µ:')
    photo = open('topics/' + topic + '/solve/' + task + '.png', 'rb')
    bot.send_photo(message.chat.id, photo)
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
    item1 = types.KeyboardButton('–î–∞')
    item2 = types.KeyboardButton('–ù–µ—Ç')
    item3 = types.KeyboardButton('+/-')
    markup.add(item1, item2, item3)
    msg = bot.send_message(message.chat.id, '–ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –≤—ã —Ä–µ—à–∏–ª–∏ –¥–∞–Ω–Ω—É—é –∑–∞–¥–∞—á—É?', reply_markup=markup)
    bot.register_next_step_handler(msg, molodec, topic, task)


@bot.message_handler(content_types=['text'])
def molodec(msg, topic, task):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
    item1 = types.KeyboardButton('/topics')
    item2 = types.KeyboardButton('/stat')
    item3 = types.KeyboardButton('/help')
    markup.add(item1, item2, item3)
    if msg.text == '–î–∞':
        bot.send_message(msg.chat.id, '–ú–æ–ª–æ–¥–µ—Ü! –¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å. ü•≥ ', reply_markup=markup)
    elif msg.text == '–ù–µ—Ç':
        bot.send_message(msg.chat.id, '–ù–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ. –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–π —Ä–µ—à–µ–Ω–∏–µ –∏ –∏—Å–ø—Ä–∞–≤—å –æ—à–∏–±–∫–∏', reply_markup=markup)
    elif msg.text == '+/-':
        bot.send_message(msg.chat.id, '–í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –±—É–¥—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ –∏ —É—á—Ç–∏ –≤—Å–µ –º–æ–º–µ–Ω—Ç—ã.', reply_markup=markup)
    df = pd.read_csv('stat.csv')
    row = pd.DataFrame([[msg.from_user.id, topic, task, msg.text]], columns=['user', 'task_topic', 'task_num', 'is_right'])
    df = df.append(row,  ignore_index=True)
    df.to_csv('stat.csv', index=False)


bot.polling(none_stop=True)
